{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel Cliente - SIEER Chile</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <link rel="stylesheet" href="{% static 'css/base.css' %}">
    <link rel="stylesheet" href="{% static 'css/client_dashboard.css' %}">
</head>
<body>
    <div class="client-container">
        <!-- Header -->
        <header class="client-header">
            <div class="header-content">
                <div class="logo-section">
                    <img src="{% static 'img/logo.png' %}" alt="SIEER Chile Logo">
                    <div class="logo-text">
                        <h1>SIEER Chile</h1>
                        <span>Panel del Cliente</span>
                    </div>
                </div>
                <div class="user-actions">
                    <div class="user-info">
                        <div class="user-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <div class="user-details">
                            <strong>{{ user.get_full_name|default:user.username }}</strong>
                            <span>Cliente</span>
                        </div>
                    </div>
                    <form method="post" action="{% url 'logout' %}" class="logout-form">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-outline logout-btn">
                            <i class="fas fa-sign-out-alt"></i>
                            <span class="btn-text">Cerrar Sesión</span>
                        </button>
                    </form>
                </div>
                <div class="mobile-menu-toggle">
                    <i class="fas fa-bars"></i>
                </div>
            </div>
        </header>

        <!-- Mobile Menu -->
        <div class="mobile-nav-overlay" id="mobileNavOverlay">
            <div class="mobile-nav-content">
                <div class="mobile-nav-header">
                    <div class="mobile-user-info">
                        <div class="user-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <div class="user-details">
                            <strong>{{ user.get_full_name|default:user.username }}</strong>
                            <span>Cliente</span>
                        </div>
                    </div>
                    <button class="mobile-close-btn" id="mobileCloseBtn">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <nav class="mobile-nav-tabs">
                    <button class="mobile-nav-tab active" data-tab="servicios">
                        <i class="fas fa-concierge-bell"></i>
                        <span>Servicios</span>
                    </button>
                    <button class="mobile-nav-tab" data-tab="productos">
                        <i class="fas fa-box-open"></i>
                        <span>Productos</span>
                    </button>
                    <button class="mobile-nav-tab" data-tab="documentos">
                        <i class="fas fa-file-alt"></i>
                        <span>Documentos</span>
                    </button>
                    <button class="mobile-nav-tab" data-tab="facturacion">
                        <i class="fas fa-file-invoice"></i>
                        <span>Facturación</span>
                    </button>
                </nav>
                
                <div class="mobile-nav-footer">
                    <form method="post" action="{% url 'logout' %}">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-outline full-width">
                            <i class="fas fa-sign-out-alt"></i>
                            Cerrar Sesión
                        </button>
                    </form>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <main class="client-main">
            <!-- Navigation Tabs -->
            <nav class="client-nav">
                <div class="nav-tabs">
                    <button class="nav-tab active" data-tab="servicios">
                        <i class="fas fa-concierge-bell"></i>
                        <span class="tab-text">Servicios</span>
                    </button>
                    <button class="nav-tab" data-tab="productos">
                        <i class="fas fa-box-open"></i>
                        <span class="tab-text">Productos</span>
                    </button>
                    <button class="nav-tab" data-tab="documentos">
                        <i class="fas fa-file-alt"></i>
                        <span class="tab-text">Documentos</span>
                    </button>
                    <button class="nav-tab" data-tab="facturacion">
                        <i class="fas fa-file-invoice"></i>
                        <span class="tab-text">Facturación</span>
                    </button>
                </div>
            </nav>

            <!-- Content Area -->
            <div class="client-content">
                <!-- Servicios Tab -->
                <div class="tab-content active" id="servicios-tab">
                    <div class="tab-header">
                        <h2>Mis Servicios</h2>
                        <div class="tab-actions">
                            <button class="btn btn-outline sm">
                                <i class="fas fa-sync-alt"></i>
                                <span>Actualizar</span>
                            </button>
                        </div>
                    </div>
                    
                    <div class="services-grid">
                        <div class="service-card">
                            <div class="service-icon">
                                <i class="fas fa-bolt"></i>
                            </div>
                            <div class="service-info">
                                <h3>Instalación Eléctrica</h3>
                                <p>Sistema completo de instalación residencial</p>
                                <div class="service-status active">
                                    <i class="fas fa-check-circle"></i>
                                    <span>Activo</span>
                                </div>
                            </div>
                            <div class="service-actions">
                                <button class="btn btn-outline">
                                    <i class="fas fa-eye"></i>
                                    <span class="btn-text">Ver Detalles</span>
                                </button>
                            </div>
                        </div>

                        <div class="service-card">
                            <div class="service-icon">
                                <i class="fas fa-solar-panel"></i>
                            </div>
                            <div class="service-info">
                                <h3>Energía Solar</h3>
                                <p>Instalación de paneles solares 5KW</p>
                                <div class="service-status pending">
                                    <i class="fas fa-clock"></i>
                                    <span>En Proceso</span>
                                </div>
                            </div>
                            <div class="service-actions">
                                <button class="btn btn-outline">
                                    <i class="fas fa-truck"></i>
                                    <span class="btn-text">Seguimiento</span>
                                </button>
                            </div>
                        </div>

                        <div class="service-card">
                            <div class="service-icon">
                                <i class="fas fa-tools"></i>
                            </div>
                            <div class="service-info">
                                <h3>Mantenimiento</h3>
                                <p>Mantenimiento preventivo trimestral</p>
                                <div class="service-status active">
                                    <i class="fas fa-check-circle"></i>
                                    <span>Activo</span>
                                </div>
                            </div>
                            <div class="service-actions">
                                <button class="btn btn-outline">
                                    <i class="fas fa-calendar"></i>
                                    <span class="btn-text">Programar</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Productos Tab -->
                <div class="tab-content" id="productos-tab">
                    <div class="tab-header">
                        <h2>Productos Adquiridos</h2>
                        <div class="tab-actions">
                            <button class="btn btn-outline sm">
                                <i class="fas fa-download"></i>
                                <span>Exportar</span>
                            </button>
                        </div>
                    </div>
                    
                    <div class="products-grid">
                        <div class="product-card">
                            <div class="product-image">
                                <i class="fas fa-bolt"></i>
                            </div>
                            <div class="product-info">
                                <h3>Transformador 50KVA</h3>
                                <p>Transformador de distribución trifásico</p>
                                <div class="product-specs">
                                    <span><i class="fas fa-bolt"></i> 50 KVA</span>
                                    <span><i class="fas fa-plug"></i> 13.2KV</span>
                                </div>
                            </div>
                            <div class="product-meta">
                                <div class="product-price">$8.450.000</div>
                                <div class="purchase-date">Comprado: 15/03/2024</div>
                            </div>
                        </div>

                        <div class="product-card">
                            <div class="product-image">
                                <i class="fas fa-cable-car"></i>
                            </div>
                            <div class="product-info">
                                <h3>Cableado Especial</h3>
                                <p>Cable de cobre calibre 2/0 AWG</p>
                                <div class="product-specs">
                                    <span><i class="fas fa-ruler"></i> 500m</span>
                                    <span><i class="fas fa-fire"></i> 90°C</span>
                                </div>
                            </div>
                            <div class="product-meta">
                                <div class="product-price">$2.350.000</div>
                                <div class="purchase-date">Comprado: 10/02/2024</div>
                            </div>
                        </div>

                        <div class="product-card">
                            <div class="product-image">
                                <i class="fas fa-solar-panel"></i>
                            </div>
                            <div class="product-info">
                                <h3>Kit Solar 3.0 KW On-Grid</h3>
                                <p>Sistema de energía solar conectado a red</p>
                                <div class="product-specs">
                                    <span><i class="fas fa-sun"></i> 3.0 KW</span>
                                    <span><i class="fas fa-bolt"></i> On-Grid</span>
                                </div>
                            </div>
                            <div class="product-meta">
                                <div class="product-price">$3.400.000</div>
                                <div class="purchase-date">Comprado: 20/01/2024</div>
                            </div>
                        </div>

                        <div class="product-card">
                            <div class="product-image">
                                <i class="fas fa-car-battery"></i>
                            </div>
                            <div class="product-info">
                                <h3>Baterías Litio 5.2KW/h</h3>
                                <p>Sistema de almacenamiento energético</p>
                                <div class="product-specs">
                                    <span><i class="fas fa-battery-full"></i> 5.2KW/h</span>
                                    <span><i class="fas fa-clock"></i> Litio</span>
                                </div>
                            </div>
                            <div class="product-meta">
                                <div class="product-price">$1.800.000</div>
                                <div class="purchase-date">Comprado: 05/12/2023</div>
                            </div>
                        </div>

                        <div class="product-card">
                            <div class="product-image">
                                <i class="fas fa-tachometer-alt"></i>
                            </div>
                            <div class="product-info">
                                <h3>Inversor HPPT 8.000W</h3>
                                <p>Inversor solar de alta eficiencia</p>
                                <div class="product-specs">
                                    <span><i class="fas fa-bolt"></i> 8.000W</span>
                                    <span><i class="fas fa-percentage"></i> HPPT</span>
                                </div>
                            </div>
                            <div class="product-meta">
                                <div class="product-price">$1.200.000</div>
                                <div class="purchase-date">Comprado: 15/11/2023</div>
                            </div>
                        </div>

                        <div class="product-card">
                            <div class="product-image">
                                <i class="fas fa-project-diagram"></i>
                            </div>
                            <div class="product-info">
                                <h3>Tablero Eléctrico Principal</h3>
                                <p>Tablero de distribución trifásico</p>
                                <div class="product-specs">
                                    <span><i class="fas fa-plug"></i> 400A</span>
                                    <span><i class="fas fa-bolt"></i> Trifásico</span>
                                </div>
                            </div>
                            <div class="product-meta">
                                <div class="product-price">$950.000</div>
                                <div class="purchase-date">Comprado: 08/10/2023</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Documentos Tab -->
                <div class="tab-content" id="documentos-tab">
                    <div class="tab-header">
                        <h2>Documentos y Archivos</h2>
                        <div class="tab-actions">
                            <button class="btn btn-outline sm">
                                <i class="fas fa-upload"></i>
                                <span>Subir</span>
                            </button>
                        </div>
                    </div>
                    
                    <div class="documents-list">
                        <div class="document-item">
                            <div class="doc-icon">
                                <i class="fas fa-file-pdf"></i>
                            </div>
                            <div class="doc-info">
                                <h4>Contrato de Servicios.pdf</h4>
                                <p>Contrato general de servicios eléctricos</p>
                                <span>Subido: 15/01/2024 • 2.4 MB</span>
                            </div>
                            <div class="doc-actions">
                                <button class="btn btn-outline">
                                    <i class="fas fa-download"></i>
                                    <span class="btn-text">Descargar</span>
                                </button>
                            </div>
                        </div>

                        <div class="document-item">
                            <div class="doc-icon">
                                <i class="fas fa-file-contract"></i>
                            </div>
                            <div class="doc-info">
                                <h4>Certificado Garantía.docx</h4>
                                <p>Certificado de garantía extendida</p>
                                <span>Subido: 20/02/2024 • 1.8 MB</span>
                            </div>
                            <div class="doc-actions">
                                <button class="btn btn-outline">
                                    <i class="fas fa-download"></i>
                                    <span class="btn-text">Descargar</span>
                                </button>
                            </div>
                        </div>

                        <div class="document-item">
                            <div class="doc-icon">
                                <i class="fas fa-file-invoice"></i>
                            </div>
                            <div class="doc-info">
                                <h4>Factura FAC-2024-00125.pdf</h4>
                                <p>Factura mensual de servicios</p>
                                <span>Subido: 15/03/2024 • 1.2 MB</span>
                            </div>
                            <div class="doc-actions">
                                <button class="btn btn-outline">
                                    <i class="fas fa-download"></i>
                                    <span class="btn-text">Descargar</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Facturación Tab -->
                <div class="tab-content" id="facturacion-tab">
                    <div class="tab-header">
                        <h2>Historial de Facturación</h2>
                        <div class="tab-actions">
                            <button class="btn btn-outline sm">
                                <i class="fas fa-file-export"></i>
                                <span>Exportar</span>
                            </button>
                        </div>
                    </div>
                    
                    <div class="invoices-container">
                        <div class="invoices-table">
                            <div class="table-header">
                                <div>N° Factura</div>
                                <div>Fecha</div>
                                <div>Monto</div>
                                <div>Estado</div>
                                <div>Acciones</div>
                            </div>
                            <div class="table-row">
                                <div data-label="N° Factura">FAC-2024-00125</div>
                                <div data-label="Fecha">15/03/2024</div>
                                <div data-label="Monto">$ 1.250.000</div>
                                <div data-label="Estado"><span class="status paid">Pagada</span></div>
                                <div data-label="Acciones">
                                    <button class="btn btn-outline sm">
                                        <i class="fas fa-download"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="table-row">
                                <div data-label="N° Factura">FAC-2024-00118</div>
                                <div data-label="Fecha">28/02/2024</div>
                                <div data-label="Monto">$ 890.000</div>
                                <div data-label="Estado"><span class="status paid">Pagada</span></div>
                                <div data-label="Acciones">
                                    <button class="btn btn-outline sm">
                                        <i class="fas fa-download"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="table-row">
                                <div data-label="N° Factura">FAC-2024-00105</div>
                                <div data-label="Fecha">15/01/2024</div>
                                <div data-label="Monto">$ 2.150.000</div>
                                <div data-label="Estado"><span class="status paid">Pagada</span></div>
                                <div data-label="Acciones">
                                    <button class="btn btn-outline sm">
                                        <i class="fas fa-download"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>


<!-- Chatbot Widget Flotante -->
<div id="chatbotWidget" style="position: fixed; bottom: 20px; right: 20px; z-index: 1000;">
    <div id="chatbotButton" style="width: 60px; height: 60px; background: linear-gradient(135deg, #00ff88, #00cc6a); border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; box-shadow: 0 5px 20px rgba(0, 255, 136, 0.5); border: 2px solid #00ff88; animation: pulse 2s infinite;">
        <i class="fas fa-robot" style="font-size: 1.5rem; color: #000;"></i>
    </div>
</div>

<!-- Chatbot Container -->
<div id="chatbotContainer" style="display: none; position: fixed; bottom: 90px; right: 20px; width: 350px; height: 500px; background: #000; border-radius: 15px; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.7); z-index: 1001; overflow: hidden; border: 2px solid #00ff88;">
    <!-- Chatbot Header -->
    <div style="background: linear-gradient(135deg, #00ff88, #00cc6a); padding: 15px; display: flex; align-items: center; justify-content: space-between;">
        <div style="display: flex; align-items: center;">
            <div style="width: 40px; height: 40px; background: #000; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 10px;">
                <i class="fas fa-robot" style="font-size: 1.2rem; color: #00ff88;"></i>
            </div>
            <div>
                <h3 style="margin: 0; color: #000; font-weight: 600;">SIEERBot</h3>
                <p style="margin: 0; font-size: 0.8rem; color: #000; opacity: 0.8;">Asistente Virtual</p>
            </div>
        </div>
        <button id="closeChatbot" style="background: none; border: none; color: #000; cursor: pointer; font-size: 1.2rem;">
            <i class="fas fa-times"></i>
        </button>
    </div>
    
    <!-- Chat Messages Area -->
    <div id="chatMessages" style="height: 340px; overflow-y: auto; padding: 15px; background: #000;">
        <!-- Initial bot message -->
        <div class="message bot-message" style="margin-bottom: 15px; animation: fadeIn 0.5s ease-in;">
            <div style="display: flex; align-items: flex-start;">
                <div style="width: 30px; height: 30px; background: linear-gradient(135deg, #00ff88, #00cc6a); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 10px; flex-shrink: 0;">
                    <i class="fas fa-robot" style="font-size: 0.8rem; color: #000;"></i>
                </div>
                <div style="background: #111; padding: 10px 15px; border-radius: 15px; border-top-left-radius: 0; max-width: 80%;">
                    <p style="margin: 0; color: #00ff88; font-size: 0.9rem;">¡Hola! Soy SIEERBot, tu asistente virtual. ¿En qué puedo ayudarte hoy?</p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Thinking Indicator (Hidden by default) -->
    <div id="thinkingIndicator" style="display: none; padding: 0 15px 10px; animation: fadeIn 0.3s ease-in;">
        <div style="display: flex; align-items: center;">
            <div style="width: 30px; height: 30px; background: linear-gradient(135deg, #00ff88, #00cc6a); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 10px; flex-shrink: 0;">
                <i class="fas fa-robot" style="font-size: 0.8rem; color: #000;"></i>
            </div>
            <div style="background: #111; padding: 10px 15px; border-radius: 15px; border-top-left-radius: 0;">
                <div class="typing-indicator" style="display: flex; align-items: center;">
                    <span style="color: #00ff88; font-size: 0.9rem;">Escribiendo</span>
                    <div class="typing-dots" style="display: flex; margin-left: 5px;">
                        <div style="width: 6px; height: 6px; background: #00ff88; border-radius: 50%; margin: 0 2px; animation: typing 1.4s infinite;"></div>
                        <div style="width: 6px; height: 6px; background: #00ff88; border-radius: 50%; margin: 0 2px; animation: typing 1.4s infinite 0.2s;"></div>
                        <div style="width: 6px; height: 6px; background: #00ff88; border-radius: 50%; margin: 0 2px; animation: typing 1.4s infinite 0.4s;"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Chat Input Area -->
    <div style="padding: 15px; background: #111; border-top: 1px solid #222;">
        <div style="display: flex; align-items: center;">
            <input type="text" id="chatInput" placeholder="Escribe tu mensaje..." style="flex: 1; padding: 12px 15px; background: #000; border: 1px solid #333; border-radius: 25px; color: #00ff88; font-size: 0.9rem; outline: none;">
            <button id="sendMessage" style="width: 40px; height: 40px; background: linear-gradient(135deg, #00ff88, #00cc6a); border: none; border-radius: 50%; margin-left: 10px; cursor: pointer; display: flex; align-items: center; justify-content: center;">
                <i class="fas fa-paper-plane" style="color: #000;"></i>
            </button>
        </div>
    </div>
</div>

<style>
    @keyframes pulse {
        0% { transform: scale(1); box-shadow: 0 5px 20px rgba(0, 255, 136, 0.5); }
        50% { transform: scale(1.05); box-shadow: 0 5px 25px rgba(0, 255, 136, 0.8); }
        100% { transform: scale(1); box-shadow: 0 5px 20px rgba(0, 255, 136, 0.5); }
    }
    
    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
    }
    
    @keyframes typing {
        0%, 60%, 100% { transform: translateY(0); }
        30% { transform: translateY(-5px); }
    }
    
    .user-message {
        margin-bottom: 15px;
        animation: fadeIn 0.5s ease-in;
    }
    
    .user-message > div {
        display: flex;
        align-items: flex-start;
        justify-content: flex-end;
    }
    
    .user-message > div > div:first-child {
        order: 2;
        margin-left: 10px;
        margin-right: 0;
    }
    
    .user-message > div > div:last-child {
        background: linear-gradient(135deg, #00ff88, #00cc6a);
        color: #000;
        border-radius: 15px;
        border-top-right-radius: 0;
        padding: 10px 15px;
        max-width: 80%;
    }
    
    .user-message p {
        margin: 0;
        font-size: 0.9rem;
    }
    
    #chatMessages::-webkit-scrollbar {
        width: 6px;
    }
    
    #chatMessages::-webkit-scrollbar-track {
        background: #111;
    }
    
    #chatMessages::-webkit-scrollbar-thumb {
        background: #00ff88;
        border-radius: 3px;
    }
    
    #chatMessages::-webkit-scrollbar-thumb:hover {
        background: #00cc6a;
    }
</style>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const chatbotButton = document.getElementById('chatbotButton');
        const chatbotContainer = document.getElementById('chatbotContainer');
        const closeChatbot = document.getElementById('closeChatbot');
        const chatMessages = document.getElementById('chatMessages');
        const chatInput = document.getElementById('chatInput');
        const sendMessage = document.getElementById('sendMessage');
        const thinkingIndicator = document.getElementById('thinkingIndicator');
        
        // Toggle chatbot visibility
        chatbotButton.addEventListener('click', function() {
            chatbotContainer.style.display = 'block';
            chatbotButton.style.display = 'none';
        });
        
        closeChatbot.addEventListener('click', function() {
            chatbotContainer.style.display = 'none';
            chatbotButton.style.display = 'flex';
        });
        
        // Send message function
        function sendUserMessage() {
            const message = chatInput.value.trim();
            if (message === '') return;
            
            // Add user message to chat
            const userMessageDiv = document.createElement('div');
            userMessageDiv.className = 'message user-message';
            userMessageDiv.innerHTML = `
                <div>
                    <div style="width: 30px; height: 30px; background: #111; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                        <i class="fas fa-user" style="font-size: 0.8rem; color: #00ff88;"></i>
                    </div>
                    <div>
                        <p>${message}</p>
                    </div>
                </div>
            `;
            chatMessages.appendChild(userMessageDiv);
            
            // Clear input
            chatInput.value = '';
            
            // Show thinking indicator
            thinkingIndicator.style.display = 'block';
            
            // Scroll to bottom
            chatMessages.scrollTop = chatMessages.scrollHeight;
            
            // Simulate bot response after delay
            setTimeout(function() {
                thinkingIndicator.style.display = 'none';
                
                // Add bot response
                const botResponse = getBotResponse(message);
                const botMessageDiv = document.createElement('div');
                botMessageDiv.className = 'message bot-message';
                botMessageDiv.style.animation = 'fadeIn 0.5s ease-in';
                botMessageDiv.innerHTML = `
                    <div style="display: flex; align-items: flex-start;">
                        <div style="width: 30px; height: 30px; background: linear-gradient(135deg, #00ff88, #00cc6a); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 10px; flex-shrink: 0;">
                            <i class="fas fa-robot" style="font-size: 0.8rem; color: #000;"></i>
                        </div>
                        <div style="background: #111; padding: 10px 15px; border-radius: 15px; border-top-left-radius: 0; max-width: 80%;">
                            <p style="margin: 0; color: #00ff88; font-size: 0.9rem;">${botResponse}</p>
                        </div>
                    </div>
                `;
                chatMessages.appendChild(botMessageDiv);
                
                // Scroll to bottom
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }, 1500 + Math.random() * 1000); // Random delay between 1.5-2.5 seconds
        }
        
        // Send message on button click
        sendMessage.addEventListener('click', sendUserMessage);
        
        // Send message on Enter key
        chatInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendUserMessage();
            }
        });
        
        // Simple bot response logic
        function getBotResponse(message) {
            const lowerMessage = message.toLowerCase();
            
            if (lowerMessage.includes('hola') || lowerMessage.includes('buenas')) {
                return '¡Hola! Me alegra verte por aquí. ¿En qué puedo asistirte hoy?';
            } else if (lowerMessage.includes('servicio') || lowerMessage.includes('instalación')) {
                return 'Puedo ayudarte con información sobre nuestros servicios eléctricos, instalaciones y mantenimiento. ¿Qué servicio específico te interesa?';
            } else if (lowerMessage.includes('producto') || lowerMessage.includes('compra')) {
                return 'Tenemos una amplia gama de productos eléctricos y de energía solar. ¿Te interesa algún producto en particular?';
            } else if (lowerMessage.includes('factura') || lowerMessage.includes('pago')) {
                return 'Puedo ayudarte con consultas sobre facturación y pagos. ¿Tienes alguna factura específica que quieras consultar?';
            } else if (lowerMessage.includes('documento') || lowerMessage.includes('contrato')) {
                return 'Puedo orientarte sobre la documentación necesaria para nuestros servicios. ¿Qué tipo de documento necesitas?';
            } else if (lowerMessage.includes('gracias') || lowerMessage.includes('agradezco')) {
                return '¡De nada! Estoy aquí para ayudarte. ¿Hay algo más en lo que pueda asistirte?';
            } else if (lowerMessage.includes('adiós') || lowerMessage.includes('chao') || lowerMessage.includes('hasta luego')) {
                return '¡Hasta luego! No dudes en contactarme si necesitas más ayuda.';
            } else {
                const responses = [
                    'Interesante pregunta. Déjame ver cómo puedo ayudarte con eso.',
                    'Entiendo tu consulta. Permíteme proporcionarte la información más relevante.',
                    'Gracias por tu pregunta. Déjame pensar en la mejor manera de asistirte.',
                    'Comprendo lo que necesitas. Te ayudo con eso.',
                    'Buena pregunta. Déjame consultar la información más actualizada para ti.'
                ];
                return responses[Math.floor(Math.random() * responses.length)];
            }
        }
    });
</script>
    <script src="{% static 'js/client_dashboard.js' %}"></script>
</body>
</html>